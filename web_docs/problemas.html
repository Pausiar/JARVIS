<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resoluci√≥n de Problemas ‚Äî J.A.R.V.I.S.</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ‚ïê‚ïê‚ïê TOPBAR ‚ïê‚ïê‚ïê -->
<header class="topbar">
  <button class="hamburger" aria-label="Men√∫">‚ò∞</button>
  <div class="topbar-brand">
    <div class="logo"></div>
    <h1>J.A.R.V.I.S.</h1>
    <span>Sistema de Ayuda</span>
  </div>
  <div class="topbar-search">
    <span class="search-icon">üîç</span>
    <input type="text" id="searchInput" placeholder="Buscar en la ayuda..." autocomplete="off">
    <div id="searchResults" class="search-results"></div>
  </div>
  <nav class="topbar-nav">
    <a href="index.html">üè† Inicio</a>
    <a href="indice.html">üìë √çndice</a>
  </nav>
</header>

<!-- ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê -->
<aside class="sidebar">
  <a href="index.html" class="sidebar-link-direct">üè† Inicio</a>

  <div class="sidebar-section">
    <div class="sidebar-section-title"><span class="arrow">‚ñ∂</span> üìò Introducci√≥n</div>
    <ul class="sidebar-links">
      <li><a href="introduccion.html">¬øQu√© es J.A.R.V.I.S.?</a></li>
      <li><a href="introduccion.html#caracteristicas">Caracter√≠sticas</a></li>
      <li><a href="introduccion.html#requisitos">Requisitos del sistema</a></li>
    </ul>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-title"><span class="arrow">‚ñ∂</span> üöÄ Primeros pasos</div>
    <ul class="sidebar-links">
      <li><a href="instalacion.html">Instalaci√≥n</a></li>
      <li><a href="interfaz.html">Primera ejecuci√≥n</a></li>
      <li><a href="interfaz.html#configuracion-inicial">Configuraci√≥n inicial</a></li>
    </ul>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-title"><span class="arrow">‚ñ∂</span> ‚öôÔ∏è Funciones principales</div>
    <ul class="sidebar-links">
      <li><a href="comandos.html">Cat√°logo de comandos</a></li>
      <li><a href="comandos.html#sistema">Control del sistema</a></li>
      <li><a href="comandos.html#ventanas">Ventanas y pesta√±as</a></li>
      <li><a href="comandos.html#web">Navegaci√≥n web</a></li>
      <li><a href="comandos.html#archivos">Gesti√≥n de archivos</a></li>
      <li><a href="comandos.html#documentos">Documentos</a></li>
      <li><a href="comandos.html#automatizacion">Automatizaci√≥n</a></li>
      <li><a href="comandos.html#multimedia">Multimedia</a></li>
      <li><a href="comandos.html#email">Email</a></li>
      <li><a href="ocr.html">Interacci√≥n visual (OCR)</a></li>
    </ul>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-title"><span class="arrow">‚ñ∂</span> üîß Configuraci√≥n</div>
    <ul class="sidebar-links">
      <li><a href="configuracion.html">Archivo config.py</a></li>
      <li><a href="configuracion.html#modo">Modo local vs. cloud</a></li>
      <li><a href="configuracion.html#apikey">API Keys</a></li>
      <li><a href="configuracion.html#plugins">Plugins</a></li>
      <li><a href="configuracion.html#memoria">Memoria y aprendizaje</a></li>
    </ul>
  </div>

  <div class="sidebar-section open">
    <div class="sidebar-section-title"><span class="arrow">‚ñ∂</span> ‚ùå Resoluci√≥n de problemas</div>
    <ul class="sidebar-links">
      <li><a href="problemas.html#ollama" class="current">Ollama no disponible</a></li>
      <li><a href="problemas.html#apps">No abre aplicaciones</a></li>
      <li><a href="problemas.html#voz">Voz y micr√≥fono</a></li>
      <li><a href="problemas.html#ocr">OCR / Clic incorrecto</a></li>
      <li><a href="problemas.html#faq">Preguntas frecuentes</a></li>
    </ul>
  </div>

  <a href="indice.html" class="sidebar-link-direct">üìë √çndice alfab√©tico</a>
</aside>

<!-- ‚ïê‚ïê‚ïê MAIN CONTENT ‚ïê‚ïê‚ïê -->
<main class="main">

  <div class="breadcrumb">
    <a href="index.html">Inicio</a> <span class="sep">‚Ä∫</span> Resoluci√≥n de problemas
  </div>

  <h1>‚ùå Resoluci√≥n de Problemas</h1>
  <p>Gu√≠a para diagnosticar y resolver los problemas m√°s comunes de JARVIS. Si tu problema no aparece aqu√≠, revisa <code>data/logs/jarvis.log</code> para ver el error exacto.</p>


  <!-- ‚îÄ‚îÄ Ollama ‚îÄ‚îÄ -->
  <h2 id="ollama">üß† Ollama no disponible / IA no responde</h2>

  <div class="callout info">
    <strong>¬øUsas modo cloud?</strong> Si tienes <code>BRAIN_MODE = "cloud"</code> (la configuraci√≥n por defecto), no necesitas Ollama en absoluto. Pasa directamente a la secci√≥n de <a href="#cloud-errors">errores de API cloud</a>.
  </div>

  <table class="key-table">
    <thead>
      <tr><th>S√≠ntoma</th><th>Causa probable</th><th>Soluci√≥n</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>¬´No se puede conectar con Ollama¬ª</td>
        <td>Ollama no est√° instalado o no est√° corriendo</td>
        <td>
          1. Instala Ollama desde <a href="https://ollama.com" target="_blank">ollama.com</a><br>
          2. Ejecuta <code>ollama serve</code> en un terminal<br>
          3. Comprueba que <code>http://localhost:11434</code> responde en el navegador
        </td>
      </tr>
      <tr>
        <td>¬´Modelo no encontrado¬ª</td>
        <td>El modelo no est√° descargado</td>
        <td>Ejecuta: <code>ollama pull mistral</code> (o el modelo configurado en <code>OLLAMA_MODEL</code>)</td>
      </tr>
      <tr>
        <td>Respuestas extremadamente lentas</td>
        <td>Hardware insuficiente para el modelo</td>
        <td>
          Usa un modelo m√°s ligero (<code>phi3</code>) o cambia a modo cloud:<br>
          <code>BRAIN_MODE = "cloud"</code>
        </td>
      </tr>
      <tr>
        <td>Error de memoria / OOM</td>
        <td>No hay suficiente RAM para cargar el modelo</td>
        <td>
          Cierra aplicaciones pesadas o usa modo cloud. Mistral requiere ‚âà8 GB RAM libres.
        </td>
      </tr>
    </tbody>
  </table>


  <!-- ‚îÄ‚îÄ Cloud errors ‚îÄ‚îÄ -->
  <h2 id="cloud-errors">‚òÅÔ∏è Errores de APIs Cloud</h2>

  <table class="key-table">
    <thead>
      <tr><th>S√≠ntoma</th><th>Causa probable</th><th>Soluci√≥n</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>¬´API key no configurada¬ª</td>
        <td>No has introducido tu clave</td>
        <td>
          Di a JARVIS: <code>"configura api key github TU_TOKEN"</code><br>
          o: <code>"configura api key gemini TU_KEY"</code><br>
          Ver <a href="configuracion.html#apikey">Configurar API Keys</a>
        </td>
      </tr>
      <tr>
        <td>Error 401 / Unauthorized</td>
        <td>API key inv√°lida o expirada</td>
        <td>Genera una nueva key y config√∫rala de nuevo</td>
      </tr>
      <tr>
        <td>Error 429 / Rate limit</td>
        <td>Has excedido el l√≠mite diario</td>
        <td>
          GitHub Models: 20K req/d√≠a. Espera a ma√±ana o cambia a Gemini:<br>
          <code>"usa el proveedor gemini"</code>
        </td>
      </tr>
      <tr>
        <td>Error de conexi√≥n / Timeout</td>
        <td>Sin internet o el servicio est√° ca√≠do</td>
        <td>Comprueba tu conexi√≥n. Si persiste, cambia de proveedor o usa modo local</td>
      </tr>
    </tbody>
  </table>


  <!-- ‚îÄ‚îÄ Apps ‚îÄ‚îÄ -->
  <h2 id="apps">üìÇ No abre aplicaciones</h2>

  <table class="key-table">
    <thead>
      <tr><th>S√≠ntoma</th><th>Causa probable</th><th>Soluci√≥n</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>¬´No se encontr√≥ la aplicaci√≥n X¬ª</td>
        <td>La app no est√° instalada o el nombre no coincide</td>
        <td>
          Prueba con el nombre exacto: <em>"abre Google Chrome"</em> en vez de <em>"abre chrome"</em>.
          Tambi√©n puedes usar: <em>"abre la aplicaci√≥n C:\ruta\al\programa.exe"</em>
        </td>
      </tr>
      <tr>
        <td>Se abre la app pero no la encuentra despu√©s</td>
        <td>El t√≠tulo de la ventana es diferente al nombre de la app</td>
        <td>
          JARVIS busca ventanas por t√≠tulo. Si Chrome se llama ¬´Inicio ‚Äî Google Chrome¬ª, di <em>"enfoca google chrome"</em> o <em>"enfoca Chrome"</em>.
        </td>
      </tr>
      <tr>
        <td>Error de permisos al abrir</td>
        <td>La app requiere ejecutar como administrador</td>
        <td>Ejecuta JARVIS como administrador (clic derecho ‚Üí Ejecutar como admin en <code>JARVIS.bat</code>)</td>
      </tr>
    </tbody>
  </table>


  <!-- ‚îÄ‚îÄ Voz ‚îÄ‚îÄ -->
  <h2 id="voz">üéôÔ∏è Voz y micr√≥fono</h2>

  <table class="key-table">
    <thead>
      <tr><th>S√≠ntoma</th><th>Causa probable</th><th>Soluci√≥n</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>No reconoce lo que digo</td>
        <td>Modelo Whisper demasiado peque√±o</td>
        <td>
          En <code>config.py</code> cambia <code>WHISPER_MODEL</code> de <code>"tiny"</code> a <code>"small"</code> o <code>"medium"</code>.
          El modelo <code>"small"</code> ofrece el mejor equilibrio calidad/velocidad para espa√±ol.
        </td>
      </tr>
      <tr>
        <td>Ctrl+Shift+J no activa la grabaci√≥n</td>
        <td>El atajo est√° en uso por otra aplicaci√≥n</td>
        <td>Cambia <code>HOTKEY_ACTIVATE</code> a otra combinaci√≥n, por ejemplo <code>"ctrl+alt+j"</code></td>
      </tr>
      <tr>
        <td>JARVIS no habla / no se oye</td>
        <td>TTS desactivado o modelo Piper no descargado</td>
        <td>
          1. Verifica <code>TTS_ENABLED = True</code> en <code>config.py</code><br>
          2. El modelo Piper se descarga autom√°ticamente en <code>data/piper_model/</code>. Si falta, ejecuta <code>python setup.py</code> de nuevo.
        </td>
      </tr>
      <tr>
        <td>Error ¬´No se detecta micr√≥fono¬ª</td>
        <td>Micr√≥fono no conectado o sin permisos</td>
        <td>
          1. Verifica que el micr√≥fono funciona en la configuraci√≥n de Windows<br>
          2. Comprueba que Python tiene permisos de micr√≥fono (Configuraci√≥n ‚Üí Privacidad ‚Üí Micr√≥fono)
        </td>
      </tr>
      <tr>
        <td>Transcripciones incorrectas (confunde palabras)</td>
        <td>Idioma auto-detectado incorrecto</td>
        <td>
          Aseg√∫rate de tener <code>WHISPER_LANGUAGE = "es"</code> en <code>config.py</code>.
          El <code>WHISPER_INITIAL_PROMPT</code> tambi√©n ayuda a mejorar la transcripci√≥n dando vocabulario de contexto.
        </td>
      </tr>
    </tbody>
  </table>


  <!-- ‚îÄ‚îÄ OCR ‚îÄ‚îÄ -->
  <h2 id="ocr">üëÅÔ∏è OCR / Clic incorrecto</h2>

  <table class="key-table">
    <thead>
      <tr><th>S√≠ntoma</th><th>Causa probable</th><th>Soluci√≥n</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>Hace clic en el lugar equivocado</td>
        <td>Resoluci√≥n de pantalla diferente a la esperada</td>
        <td>
          JARVIS usa 3 estrategias de clic en cascada: <strong>Ctrl+F</strong> ‚Üí <strong>UI Automation</strong> ‚Üí <strong>OCR</strong>.
          Si Ctrl+F no funciona en la app, se usa OCR como fallback. Aseg√∫rate de que el texto sea visible en pantalla.
        </td>
      </tr>
      <tr>
        <td>Hace clic simple donde deber√≠a hacer doble clic</td>
        <td>El agente no detect√≥ que era un icono/archivo</td>
        <td>
          JARVIS tiene <strong>auto-retry con doble clic</strong>: si detecta que un clic simple no cambi√≥ la pantalla, reintenta autom√°ticamente con doble clic. Si persiste, di expl√≠citamente: <em>"haz doble clic en X"</em>.
        </td>
      </tr>
      <tr>
        <td>¬´No encuentro el texto X en pantalla¬ª</td>
        <td>El texto no es visible o est√° parcialmente oculto</td>
        <td>
          Aseg√∫rate de que la ventana objetivo est√© maximizada y el texto sea completamente visible. Si el texto es largo, usa texto parcial: <em>"haz clic donde pone Actividad"</em> en vez del nombre completo.
        </td>
      </tr>
      <tr>
        <td>OCR no lee bien caracteres especiales</td>
        <td>Fuente o contraste dif√≠cil para el OCR</td>
        <td>
          El motor OCR (Tesseract) funciona mejor con texto claro sobre fondo contrastante. En apps con temas oscuros puede haber errores. Intenta maximizar el contraste.
        </td>
      </tr>
    </tbody>
  </table>


  <!-- ‚îÄ‚îÄ FAQ ‚îÄ‚îÄ -->
  <h2 id="faq">‚ùì Preguntas frecuentes</h2>

  <details class="faq-item">
    <summary>¬øJARVIS funciona sin internet?</summary>
    <p>S√≠, en <strong>modo local</strong> (<code>BRAIN_MODE = "local"</code>) todo se ejecuta en tu PC con Ollama. La voz (Whisper + Piper), el OCR y los comandos del sistema tambi√©n funcionan offline. Solo el modo cloud y la b√∫squeda web requieren internet.</p>
  </details>

  <details class="faq-item">
    <summary>¬øEs compatible con macOS o Linux?</summary>
    <p>Actualmente JARVIS est√° dise√±ado para <strong>Windows 10/11</strong>. Muchas funciones (control de ventanas, PowerShell, UI Automation) dependen de APIs de Windows. Una versi√≥n multiplataforma est√° prevista para el futuro.</p>
  </details>

  <details class="faq-item">
    <summary>¬øPuedo cambiar el modelo de IA?</summary>
    <p>S√≠. En modo local, cambia <code>OLLAMA_MODEL</code> a cualquier modelo compatible con Ollama (<code>mistral</code>, <code>llama3</code>, <code>phi3</code>, etc.). En modo cloud, puedes cambiar entre GitHub Models (GPT-4o-mini) y Gemini (2.0 Flash) desde el propio JARVIS con un simple comando.</p>
  </details>

  <details class="faq-item">
    <summary>¬øLas API keys son de pago?</summary>
    <p><strong>No</strong>. Tanto GitHub Models (GPT-4o-mini, 20K solicitudes/d√≠a) como Google Gemini (2.0 Flash) ofrecen acceso gratuito con l√≠mites m√°s que suficientes para uso personal.</p>
  </details>

  <details class="faq-item">
    <summary>¬øPuedo desactivar la voz?</summary>
    <p>S√≠. Pon <code>TTS_ENABLED = False</code> en <code>config.py</code>. JARVIS seguir√° respondiendo por texto en la interfaz HUD pero no hablar√° en voz alta.</p>
  </details>

  <details class="faq-item">
    <summary>¬øJARVIS puede aprender cosas nuevas?</summary>
    <p>S√≠. Tiene un <strong>motor de aprendizaje</strong> que puede investigar c√≥mo hacer tareas nuevas, generar c√≥digo, probarlo y guardar las habilidades que funcionan. Tambi√©n guarda procedimientos aut√≥nomos exitosos para reutilizarlos. Di <em>"aprende a hacer X"</em> para activar la investigaci√≥n.</p>
  </details>

  <details class="faq-item">
    <summary>¬øC√≥mo actualizo JARVIS?</summary>
    <p>Si lo tienes clonado con Git: <code>git pull</code> y luego <code>pip install -r requirements.txt</code>. Si lo descargaste como ZIP, descarga la versi√≥n nueva y copia tu <code>data/config.json</code> para conservar tu configuraci√≥n.</p>
  </details>

  <details class="faq-item">
    <summary>¬øPuedo ejecutar c√≥digo arbitrario?</summary>
    <p>S√≠, JARVIS incluye un sandbox de c√≥digo Python. Di <em>"ejecuta este c√≥digo: print('hola')"</em>. El sandbox tiene un timeout de 30 segundos y l√≠mite de memoria de 256 MB (<code>CODE_EXEC_TIMEOUT</code> / <code>CODE_EXEC_MAX_MEMORY</code>) para evitar que c√≥digo malicioso afecte al sistema.</p>
  </details>


  <!-- ‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê -->
  <div class="page-nav">
    <a href="configuracion.html" class="nav-prev">‚Üê Configuraci√≥n</a>
    <a href="indice.html" class="nav-next">√çndice alfab√©tico ‚Üí</a>
  </div>

</main>

<script src="script.js"></script>
</body>
</html>
